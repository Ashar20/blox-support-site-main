"use strict";(self.webpackChunkionic_docs=self.webpackChunkionic_docs||[]).push([[86699],{3905:function(e,t,n){n.d(t,{Zo:function(){return s},kt:function(){return u}});var a=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=a.createContext({}),p=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},s=function(e){var t=p(e.components);return a.createElement(c.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,c=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),d=p(n),u=o,m=d["".concat(c,".").concat(u)]||d[u]||h[u]||r;return n?a.createElement(m,i(i({ref:t},s),{},{components:n})):a.createElement(m,i({ref:t},s))}));function u(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=d;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var p=2;p<r;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},53743:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return c},metadata:function(){return p},toc:function(){return s},default:function(){return d}});var a=n(87462),o=n(63366),r=(n(67294),n(3905)),i=["components"],l={title:"Taking Photos with the Camera",sidebar_label:"Create a project"},c=void 0,p={unversionedId:"Content Hub/Enrich/project",id:"Content Hub/Enrich/project",isDocsHomePage:!1,title:"Taking Photos with the Camera",description:"Build Camera API for iOS, Android & Web | Ionic Capacitor Camera",source:"@site/docs/Content Hub/Enrich/project.md",sourceDirName:"Content Hub/Enrich",slug:"/Content Hub/Enrich/project",permalink:"/developer/docs/Content Hub/Enrich/project",editUrl:"https://github.com/ionic-team/ionic-docs/edit/main/docs/Content Hub/Enrich/project.md",tags:[],version:"current",frontMatter:{title:"Taking Photos with the Camera",sidebar_label:"Create a project"},sidebar:"docs",previous:{title:"Data organization",permalink:"/developer/docs/Content Hub/Enrich/dataorg"},next:{title:"Catalog Listing",permalink:"/developer/docs/Content Hub/performance"}},s=[{value:"Photo Service",id:"photo-service",children:[],level:2},{value:"Displaying Photos",id:"displaying-photos",children:[],level:2}],h={toc:s};function d(e){var t=e.components,l=(0,o.Z)(e,i);return(0,r.kt)("wrapper",(0,a.Z)({},h,l,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("head",null,(0,r.kt)("title",null,"Build Camera API for iOS, Android & Web | Ionic Capacitor Camera"),(0,r.kt)("meta",{name:"description",content:"Add the ability to take photos with your device's camera using the Ionic Capacitor Camera API for mobile iOS, Android, and the web. Learn how here."})),(0,r.kt)("p",null,"Now for the fun part - adding the ability to take photos with the device\u2019s camera using the Capacitor ",(0,r.kt)("a",{parentName:"p",href:"https://capacitorjs.com/docs/apis/camera"},"Camera API"),". We\u2019ll begin with building it for the web, then make some small tweaks to make it work on mobile (iOS and Android)."),(0,r.kt)("h2",{id:"photo-service"},"Photo Service"),(0,r.kt)("p",null,"All Capacitor logic (Camera usage and other native features) will be encapsulated in a service class. Create ",(0,r.kt)("inlineCode",{parentName:"p"},"PhotoService")," using the ",(0,r.kt)("inlineCode",{parentName:"p"},"ionic generate")," command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"ionic g service services/photo\n")),(0,r.kt)("p",null,"Open the new ",(0,r.kt)("inlineCode",{parentName:"p"},"services/photo.service.ts")," file, and let\u2019s add the logic that will power the camera functionality. First, import Capacitor dependencies and get references to the Camera, Filesystem, and Storage plugins:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"import { Camera, CameraResultType, CameraSource, Photo } from '@capacitor/camera';\nimport { Filesystem, Directory } from '@capacitor/filesystem';\nimport { Preferences } from '@capacitor/preferences';\n")),(0,r.kt)("p",null,"Next, define a new class method, ",(0,r.kt)("inlineCode",{parentName:"p"},"addNewToGallery"),", that will contain the core logic to take a device photo and save it to the filesystem. Let\u2019s start by opening the device camera:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"public async addNewToGallery() {\n  // Take a photo\n  const capturedPhoto = await Camera.getPhoto({\n    resultType: CameraResultType.Uri,\n    source: CameraSource.Camera,\n    quality: 100\n  });\n}\n")),(0,r.kt)("p",null,"Notice the magic here: there's no platform-specific code (web, iOS, or Android)! The Capacitor Camera plugin abstracts that away for us, leaving just one method call - ",(0,r.kt)("inlineCode",{parentName:"p"},"Camera.getPhoto()")," - that will open up the device's camera and allow us to take photos."),(0,r.kt)("p",null,"Next, open up ",(0,r.kt)("inlineCode",{parentName:"p"},"tab2.page.ts")," and import the PhotoService class and add a method that calls the ",(0,r.kt)("inlineCode",{parentName:"p"},"addNewToGallery")," method on the imported service:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"import { PhotoService } from '../services/photo.service';\n\nconstructor(public photoService: PhotoService) { }\n\naddPhotoToGallery() {\n  this.photoService.addNewToGallery();\n}\n")),(0,r.kt)("p",null,"Then, open ",(0,r.kt)("inlineCode",{parentName:"p"},"tab2.page.html")," and call the ",(0,r.kt)("inlineCode",{parentName:"p"},"addPhotoToGallery()")," function when the FAB is tapped/clicked:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'<ion-content>\n  <ion-fab vertical="bottom" horizontal="center" slot="fixed">\n    <ion-fab-button (click)="addPhotoToGallery()">\n      <ion-icon name="camera"></ion-icon>\n    </ion-fab-button>\n  </ion-fab>\n</ion-content>\n')),(0,r.kt)("p",null,"Save the file, and if it's not running already, restart the development server in your browser by running ",(0,r.kt)("inlineCode",{parentName:"p"},"ionic serve"),". On the Photo Gallery tab, click the Camera button. If your computer has a webcam of any sort, a modal window appears. Take a selfie!"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Camera API on the web",src:n(80465).Z})),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"(Your selfie is probably much better than mine)")),(0,r.kt)("p",null,"After taking a photo, it disappears right away. We need to display it within our app and save it for future access."),(0,r.kt)("h2",{id:"displaying-photos"},"Displaying Photos"),(0,r.kt)("p",null,"Outside of the ",(0,r.kt)("inlineCode",{parentName:"p"},"PhotoService")," class definition (the very bottom of the file), create a new interface, ",(0,r.kt)("inlineCode",{parentName:"p"},"UserPhoto"),", to hold our photo metadata:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"export interface UserPhoto {\n  filepath: string;\n  webviewPath: string;\n}\n")),(0,r.kt)("p",null,"Back at the top of the file, define an array of Photos, which will contain a reference to each photo captured with the Camera."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"export class PhotoService {\n  public photos: UserPhoto[] = [];\n\n  // other code\n}\n")),(0,r.kt)("p",null,"Over in the ",(0,r.kt)("inlineCode",{parentName:"p"},"addNewToGallery")," function, add the newly captured photo to the beginning of the Photos array."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'  const capturedPhoto = await Camera.getPhoto({\n    resultType: CameraResultType.Uri,\n    source: CameraSource.Camera,\n    quality: 100\n  });\n\n  this.photos.unshift({\n    filepath: "soon...",\n    webviewPath: capturedPhoto.webPath\n  });\n}\n')),(0,r.kt)("p",null,"Next, move over to ",(0,r.kt)("inlineCode",{parentName:"p"},"tab2.page.html")," so we can display the image on the screen. Add a ",(0,r.kt)("a",{parentName:"p",href:"https://ionicframework.com/docs/api/grid"},"Grid component")," so that each photo will display nicely as photos are added to the gallery, and loop through each photo in the ",(0,r.kt)("inlineCode",{parentName:"p"},"PhotoServices"),"'s Photos array, adding an Image component (",(0,r.kt)("inlineCode",{parentName:"p"},"<ion-img>"),") for each. Point the ",(0,r.kt)("inlineCode",{parentName:"p"},"src")," (source) at the photo\u2019s path:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'<ion-content>\n  <ion-grid>\n    <ion-row>\n      <ion-col size="6" *ngFor="let photo of photoService.photos; index as position">\n        <ion-img [src]="photo.webviewPath"></ion-img>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n\n  \x3c!-- ion-fab markup  --\x3e\n</ion-content>\n')),(0,r.kt)("p",null,"Save all files. Within the web browser, click the Camera button and take another photo. This time, the photo is displayed in the Photo Gallery!"),(0,r.kt)("p",null,"Up next, we\u2019ll add support for saving the photos to the filesystem, so they can be retrieved and displayed in our app at a later time."))}d.isMDXComponent=!0},80465:function(e,t,n){t.Z=n.p+"assets/images/camera-web-a07837d32fc6a75dd68d0d86345901c9.png"}}]);