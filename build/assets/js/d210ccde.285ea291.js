"use strict";(self.webpackChunkionic_docs=self.webpackChunkionic_docs||[]).push([[49126],{58215:function(e,n,a){var t=a(67294);n.Z=function(e){var n=e.children,a=e.hidden,r=e.className;return t.createElement("div",{role:"tabpanel",hidden:a,className:r},n)}},26396:function(e,n,a){a.d(n,{Z:function(){return p}});var t=a(87462),r=a(67294),i=a(72389),o=a(79443);var l=function(){var e=(0,r.useContext)(o.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e},s=a(89521),c=a(86010),d="tabItem_1uMI";function u(e){var n,a,t,i=e.lazy,o=e.block,u=e.defaultValue,p=e.values,m=e.groupId,v=e.className,h=r.Children.map(e.children,(function(e){if((0,r.isValidElement)(e)&&void 0!==e.props.value)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),f=null!=p?p:h.map((function(e){var n=e.props;return{value:n.value,label:n.label}})),g=(0,s.lx)(f,(function(e,n){return e.value===n.value}));if(g.length>0)throw new Error('Docusaurus error: Duplicate values "'+g.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var k=null===u?u:null!=(n=null!=u?u:null==(a=h.find((function(e){return e.props.default})))?void 0:a.props.value)?n:null==(t=h[0])?void 0:t.props.value;if(null!==k&&!f.some((function(e){return e.value===k})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+k+'" but none of its children has the corresponding value. Available values are: '+f.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var b=l(),y=b.tabGroupChoices,N=b.setTabGroupChoices,C=(0,r.useState)(k),w=C[0],E=C[1],D=[],A=(0,s.o5)().blockElementScrollPositionUntilNextRender;if(null!=m){var T=y[m];null!=T&&T!==w&&f.some((function(e){return e.value===T}))&&E(T)}var B=function(e){var n=e.currentTarget,a=D.indexOf(n),t=f[a].value;t!==w&&(A(n),E(t),null!=m&&N(m,t))},I=function(e){var n,a=null;switch(e.key){case"ArrowRight":var t=D.indexOf(e.currentTarget)+1;a=D[t]||D[0];break;case"ArrowLeft":var r=D.indexOf(e.currentTarget)-1;a=D[r]||D[D.length-1]}null==(n=a)||n.focus()};return r.createElement("div",{className:"tabs-container"},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,c.Z)("tabs",{"tabs--block":o},v)},f.map((function(e){var n=e.value,a=e.label;return r.createElement("li",{role:"tab",tabIndex:w===n?0:-1,"aria-selected":w===n,className:(0,c.Z)("tabs__item",d,{"tabs__item--active":w===n}),key:n,ref:function(e){return D.push(e)},onKeyDown:I,onFocus:B,onClick:B},null!=a?a:n)}))),i?(0,r.cloneElement)(h.filter((function(e){return e.props.value===w}))[0],{className:"margin-vert--md"}):r.createElement("div",{className:"margin-vert--md"},h.map((function(e,n){return(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==w})}))))}function p(e){var n=(0,i.Z)();return r.createElement(u,(0,t.Z)({key:String(n)},e))}},47758:function(e,n,a){a.d(n,{Z:function(){return s}});var t=a(67294),r=a(86010),i=a(39960),o=a(44996),l="card_3DNo";var s=function(e){var n,a=void 0===e.href,s=void 0!==e.href&&/^http/.test(e.href),c="undefined"===e.header?null:t.createElement("header",{className:"Card-header"},e.header),d=e.hoverIcon||e.icon,u=t.createElement(t.Fragment,null,e.img&&t.createElement("img",{src:(0,o.Z)(e.img),className:"Card-image"}),t.createElement("div",{className:"Card-container"},(e.icon||d)&&t.createElement("div",{className:"Card-icon-row"},e.icon&&t.createElement("img",{src:(0,o.Z)(e.icon),className:"Card-icon Card-icon-default"}),d&&t.createElement("img",{src:(0,o.Z)(d),className:"Card-icon Card-icon-hover"})),e.ionicon&&t.createElement("ion-icon",{name:e.ionicon,className:"Card-ionicon"}),e.iconset&&t.createElement("div",{className:"Card-iconset__container"},e.iconset.split(",").map((function(n,a){return t.createElement("img",{src:(0,o.Z)(n),className:"Card-icon "+(a===e.activeIndex?"Card-icon-active":""),"data-index":a,key:a})}))),e.header&&c,t.createElement("div",{className:"Card-content"},e.children))),p=(0,r.Z)(((n={"Card-with-image":void 0!==e.img,"Card-without-image":void 0===e.img,"Card-size-lg":"lg"===e.size})[e.className]=e.className,n));return a?t.createElement("docs-card",{class:p},t.createElement("div",{className:(0,r.Z)(l,"docs-card")},u)):s?t.createElement("docs-card",{class:p},t.createElement("a",{className:(0,r.Z)(l,"docs-card"),href:e.href,target:"_blank"},u)):t.createElement("docs-card",{class:p},t.createElement(i.default,{to:e.href,className:(0,r.Z)(l,"docs-card")},u))}},88694:function(e,n,a){a.d(n,{Z:function(){return d}});var t=a(87462),r=a(63366),i=a(86010),o=a(67294),l="docsButton_2gXP",s="docsButtonRound_2y-L",c=["href","round"];function d(e){var n,a=e.href,d=e.round,u=void 0!==d&&d,p=(0,r.Z)(e,c);return p.className=(0,i.Z)(((n={})[p.className]=Boolean(p.className),n[l]=!0,n["docs-button"]=!0,n[s]=u,n["docs-button--round"]=u,n)),a?o.createElement("a",(0,t.Z)({href:a,className:"docsButton"},p),p.children):o.createElement("button",(0,t.Z)({className:"docsButton"},p),p.children)}},32846:function(e,n,a){a.r(n),a.d(n,{frontMatter:function(){return p},contentTitle:function(){return m},metadata:function(){return v},toc:function(){return h},default:function(){return g}});var t=a(87462),r=a(63366),i=(a(67294),a(3905)),o=a(47758),l=a(88694),s=a(26396),c=a(58215),d=a(19055),u=["components"],p={sidebar_label:"BLE"},m="BLE",v={unversionedId:"native/ble",id:"version-v5/native/ble",isDocsHomePage:!1,title:"BLE",description:"This plugin enables communication between a phone and Bluetooth Low Energy (BLE) peripherals.",source:"@site/versioned_docs/version-v5/native/ble.md",sourceDirName:"native",slug:"/native/ble",permalink:"/developer/docs/v5/native/ble",editUrl:"https://github.com/ionic-team/ionic-native/edit/master/src/@awesome-cordova-plugins/plugins/ble/index.ts",tags:[],version:"v5",frontMatter:{sidebar_label:"BLE"},sidebar:"version-v5/native",previous:{title:"BiometricWrapper",permalink:"/developer/docs/v5/native/biometric-wrapper"},next:{title:"BlinkId",permalink:"/developer/docs/v5/native/blinkid"}},h=[{value:"Supported Platforms",id:"supported-platforms",children:[],level:2},{value:"Usage",id:"usage",children:[{value:"React",id:"react",children:[],level:3},{value:"Angular",id:"angular",children:[],level:3}],level:2},{value:"Peripheral Data",id:"peripheral-data",children:[],level:2},{value:"Advertising Data",id:"advertising-data",children:[{value:"Android",id:"android",children:[],level:3},{value:"iOS",id:"ios",children:[],level:3}],level:2},{value:"Typed Arrays",id:"typed-arrays",children:[],level:2},{value:"UUIDs",id:"uuids",children:[],level:2}],f={toc:h};function g(e){var n=e.components,a=(0,r.Z)(e,u);return(0,i.kt)("wrapper",(0,t.Z)({},f,a,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"ble"},"BLE"),(0,i.kt)("p",null,"This plugin enables communication between a phone and Bluetooth Low Energy (BLE) peripherals."),(0,i.kt)("p",null,"The plugin provides a simple JavaScript API for iOS and Android."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Scan for peripherals"),(0,i.kt)("li",{parentName:"ul"},"Connect to a peripheral"),(0,i.kt)("li",{parentName:"ul"},"Read the value of a characteristic"),(0,i.kt)("li",{parentName:"ul"},"Write new value to a characteristic"),(0,i.kt)("li",{parentName:"ul"},"Get notified when characteristic's value changes")),(0,i.kt)("p",null,"Advertising information is returned when scanning for peripherals. Service, characteristic, and property info is returned when connecting to a peripheral. All access is via service and characteristic UUIDs. The plugin manages handles internally."),(0,i.kt)("p",null,"Simultaneous connections to multiple peripherals are supported."),(0,i.kt)("p",null,(0,i.kt)("a",{href:"https://github.com/don/cordova-plugin-ble-central",target:"_blank",rel:"noopener",className:"git-link"},(0,i.kt)("svg",{viewBox:"0 0 512 512"},(0,i.kt)("path",{d:"M416 160c0-35.3-28.7-64-64-64s-64 28.7-64 64c0 23.7 12.9 44.3 32 55.4v8.6c0 19.9-7.8 33.7-25.3 44.9-15.4 9.8-38.1 17.1-67.5 21.5-14 2.1-25.7 6-35.2 10.7V151.4c19.1-11.1 32-31.7 32-55.4 0-35.3-28.7-64-64-64S96 60.7 96 96c0 23.7 12.9 44.3 32 55.4v209.2c-19.1 11.1-32 31.7-32 55.4 0 35.3 28.7 64 64 64s64-28.7 64-64c0-16.6-6.3-31.7-16.7-43.1 1.9-4.9 9.7-16.3 29.4-19.3 38.8-5.8 68.9-15.9 92.3-30.8 36-22.8 55-57 55-98.8v-8.6c19.1-11.1 32-31.7 32-55.4zM160 56c22.1 0 40 17.9 40 40s-17.9 40-40 40-40-17.9-40-40 17.9-40 40-40zm0 400c-22.1 0-40-17.9-40-40s17.9-40 40-40 40 17.9 40 40-17.9 40-40 40zm192-256c-22.1 0-40-17.9-40-40s17.9-40 40-40 40 17.9 40 40-17.9 40-40 40z"}))," ","https://github.com/don/cordova-plugin-ble-central")),(0,i.kt)("h2",null,"Stuck on a Cordova issue?"),(0,i.kt)(o.Z,{className:"cordova-ee-card",header:"Don't waste precious time on plugin issues.",href:"https://ionicframework.com/sales?product_of_interest=Ionic%20Native",mdxType:"DocsCard"},(0,i.kt)("div",null,(0,i.kt)("img",{src:"/docs/icons/native-cordova-bot.png",class:"cordova-ee-img"}),(0,i.kt)("p",null,"If you're building a serious project, you can't afford to spend hours troubleshooting. Ionic\u2019s experts offer premium advisory services for both community plugins and premier plugins."),(0,i.kt)(l.Z,{className:"native-ee-detail",mdxType:"DocsButton"},"Contact Us Today!"))),(0,i.kt)("h2",{id:"installation"},(0,i.kt)("a",{href:"#installation"},"Installation")),(0,i.kt)(s.Z,{groupId:"runtime",defaultValue:"Capacitor",values:[{value:"Capacitor",label:"Capacitor"},{value:"Cordova",label:"Cordova"},{value:"Enterprise",label:"Enterprise"}],mdxType:"Tabs"},(0,i.kt)(c.Z,{value:"Capacitor",mdxType:"TabItem"},(0,i.kt)(d.Z,{className:"language-shell",mdxType:"CodeBlock"},"$ npm install cordova-plugin-ble-central ","\n","$ npm install @awesome-cordova-plugins/ble ","\n","$ ionic cap sync")),(0,i.kt)(c.Z,{value:"Cordova",mdxType:"TabItem"},(0,i.kt)(d.Z,{className:"language-shell",mdxType:"CodeBlock"},"$ ionic cordova plugin add cordova-plugin-ble-central ","\n","$ npm install @awesome-cordova-plugins/ble ","\n")),(0,i.kt)(c.Z,{value:"Enterprise",mdxType:"TabItem"},(0,i.kt)("blockquote",null,"Ionic Enterprise comes with fully supported and maintained plugins from the Ionic Team. \xa0",(0,i.kt)("a",{class:"btn",href:"https://ionic.io/docs/premier-plugins"},"Learn More")," or if you're interested in an enterprise version of this plugin ",(0,i.kt)("a",{class:"btn",href:"https://ionicframework.com/sales?product_of_interest=Ionic%20Enterprise%20Engine"},"Contact Us")))),(0,i.kt)("h2",{id:"supported-platforms"},"Supported Platforms"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Android"),(0,i.kt)("li",{parentName:"ul"},"iOS")),(0,i.kt)("h2",{id:"usage"},"Usage"),(0,i.kt)("h3",{id:"react"},"React"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"/developer/docs/v5/native/community#react"},"Learn more about using Ionic Native components in React")),(0,i.kt)("h3",{id:"angular"},"Angular"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx"},"\nimport { BLE } from '@awesome-cordova-plugins/ble/ngx';\n\nconstructor(private ble: BLE) { }\n\n")),(0,i.kt)("h2",{id:"peripheral-data"},"Peripheral Data"),(0,i.kt)("p",null,"Peripheral Data is passed to the success callback when scanning and connecting. Limited data is passed when scanning."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx"},"  {\n      'name': 'Battery Demo',\n      'id': '20:FF:D0:FF:D1:C0',\n      'advertising': [2,1,6,3,3,15,24,8,9,66,97,116,116,101,114,121],\n      'rssi': -55\n  }\n")),(0,i.kt)("p",null,"After connecting, the peripheral object also includes service, characteristic and descriptor information."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx"},"  {\n      'name': 'Battery Demo',\n      'id': '20:FF:D0:FF:D1:C0',\n      'advertising': [2,1,6,3,3,15,24,8,9,66,97,116,116,101,114,121],\n      'rssi': -55,\n      'services': [\n          '1800',\n          '1801',\n          '180f'\n      ],\n      'characteristics': [\n          {\n              'service': '1800',\n              'characteristic': '2a00',\n              'properties': [\n                  'Read'\n              ]\n          },\n          {\n              'service': '1800',\n              'characteristic': '2a01',\n              'properties': [\n                  'Read'\n              ]\n          },\n          {\n              'service': '1801',\n              'characteristic': '2a05',\n              'properties': [\n                  'Read'\n              ]\n          },\n          {\n              'service': '180f',\n              'characteristic': '2a19',\n              'properties': [\n                  'Read'\n              ],\n              'descriptors': [\n                  {\n                      'uuid': '2901'\n                  },\n                  {\n                      'uuid': '2904'\n                  }\n              ]\n          }\n      ]\n  }\n")),(0,i.kt)("h2",{id:"advertising-data"},"Advertising Data"),(0,i.kt)("p",null,"Bluetooth advertising data is returned in when scanning for devices. The format varies depending on your platform. On Android advertising data will be the raw advertising bytes. iOS does not allow access to raw advertising data, so a dictionary of data is returned."),(0,i.kt)("p",null,"The advertising information for both Android and iOS appears to be a combination of advertising data and scan response data."),(0,i.kt)("h3",{id:"android"},"Android"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx"},"  {\n      'name': 'demo',\n      'id': '00:1A:7D:DA:71:13',\n      'advertising': ArrayBuffer,\n     'rssi': -37\n }\n")),(0,i.kt)("p",null,"Convert the advertising info to a Uint8Array for processing. ",(0,i.kt)("inlineCode",{parentName:"p"},"var adData = new Uint8Array(peripheral.advertising)")),(0,i.kt)("h3",{id:"ios"},"iOS"),(0,i.kt)("p",null,"Note that iOS uses the string value of the constants for the ",(0,i.kt)("a",{parentName:"p",href:"https://developer.apple.com/library/ios/documentation/CoreBluetooth/Reference/CBCentralManagerDelegate_Protocol/index.html#//apple_ref/doc/constant_group/Advertisement_Data_Retrieval_Keys"},"Advertisement Data Retrieval Keys"),". This will likely change in the future."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx"},"  {\n      'name': 'demo',\n      'id': 'D8479A4F-7517-BCD3-91B5-3302B2F81802',\n      'advertising': {\n          'kCBAdvDataChannel': 37,\n          'kCBAdvDataServiceData': {\n              'FED8': {\n                  'byteLength': 7 // data not shown\n              }\n          },\n          'kCBAdvDataLocalName': 'demo',\n          'kCBAdvDataServiceUUIDs': ['FED8'],\n          'kCBAdvDataManufacturerData': {\n              'byteLength': 7  // data not shown\n          },\n          'kCBAdvDataTxPowerLevel': 32,\n          'kCBAdvDataIsConnectable': true\n      },\n      'rssi': -53\n  }\n")),(0,i.kt)("h2",{id:"typed-arrays"},"Typed Arrays"),(0,i.kt)("p",null,"This plugin uses typed Arrays or ArrayBuffers for sending and receiving data."),(0,i.kt)("p",null,"This means that you need convert your data to ArrayBuffers before sending and from ArrayBuffers when receiving."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx"},"  // ASCII only\n  function stringToBytes(string) {\n     var array = new Uint8Array(string.length);\n     for (var i = 0, l = string.length; i &lt; l; i++) {\n         array[i] = string.charCodeAt(i);\n      }\n      return array.buffer;\n  }\n\n  // ASCII only\n  function bytesToString(buffer) {\n      return String.fromCharCode.apply(null, new Uint8Array(buffer));\n  }\n")),(0,i.kt)("p",null,"You can read more about typed arrays in these articles on ",(0,i.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Typed_arrays"},"MDN")," and ",(0,i.kt)("a",{parentName:"p",href:"http://www.html5rocks.com/en/tutorials/webgl/typed_arrays/"},"HTML5 Rocks"),"."),(0,i.kt)("h2",{id:"uuids"},"UUIDs"),(0,i.kt)("p",null,"UUIDs are always strings and not numbers. Some 16-bit UUIDs, such as '2220' look like integers, but they're not. (The integer 2220 is 0x8AC in hex.) This isn't a problem with 128 bit UUIDs since they look like strings 82b9e6e1-593a-456f-be9b-9215160ebcac. All 16-bit UUIDs should also be passed to methods as strings."))}g.isMDXComponent=!0}}]);